# -------------------------------------------------------------------
# Telegram / MTProto configuration
# -------------------------------------------------------------------

# Telegram API ID issued by https://my.telegram.org (Telethon client uses it)
TG_API_ID=changeme
# Telegram API Hash paired with TG_API_ID for MTProto auth
TG_API_HASH=changeme
# Phone number shown in UI (stored masked; never shared outside)
TG_PHONE=changeme

# -------------------------------------------------------------------
# Alert routing & digest preferences
# -------------------------------------------------------------------

# Where to deliver alerts: dm | channel | both
ALERT_MODE=both
# Target channel username or ID when ALERT_MODE includes channel delivery
ALERT_CHANNEL=changeme
# Enable hourly digest generation (true/false)
HOURLY_DIGEST=true
# Enable daily digest generation (true/false)
DAILY_DIGEST=true

# -------------------------------------------------------------------
# Redis connectivity
# -------------------------------------------------------------------

# Redis hostname reachable from both containers
REDIS_HOST=redis
# Redis TCP port
REDIS_PORT=6379
# Redis stream key storing processed Telegram messages
REDIS_STREAM=tgsentinel:messages
# Redis consumer group name for worker processing
REDIS_GROUP=workers
# Logical consumer ID inside the consumer group
REDIS_CONSUMER=worker-1

# -------------------------------------------------------------------
# Storage paths (dual-database contract)
# -------------------------------------------------------------------

# Sentinel worker application database URI
DB_URI=sqlite:////app/data/sentinel.db
# UI service database URI (UI-only state)
UI_DB_URI=sqlite:////app/data/ui.db
# Absolute path to Telethon session file (sentinel exclusive)
TG_SESSION_PATH=/app/data/tgsentinel.session

# -------------------------------------------------------------------
# Sentinel API exposure
# -------------------------------------------------------------------

# Port where the sentinel Flask API listens
SENTINEL_API_PORT=8080
# Base URL the UI uses to reach sentinel APIs over Docker network
SENTINEL_API_BASE_URL=http://sentinel:8080/api

# -------------------------------------------------------------------
# Semantic scoring / embeddings
# -------------------------------------------------------------------

# Sentence-transformer model used for embeddings (empty disables)
EMBEDDINGS_MODEL=all-MiniLM-L6-v2
# Cosine similarity threshold for semantic matches
SIMILARITY_THRESHOLD=0.42

# -------------------------------------------------------------------
# Runtime / logging
# -------------------------------------------------------------------

# Force unbuffered stdout/stderr for Docker logs
PYTHONUNBUFFERED=1
# Global log level for both services
LOG_LEVEL=INFO

# -------------------------------------------------------------------
# UI security & access control
# -------------------------------------------------------------------

# Flask secret key for sessions, CSRF, etc. (change in production)
UI_SECRET_KEY=2cecbcb9ed37253a7c608643ca1a898f19f173195561d11a4f10a6b5cf3380eb
# Optional UI lock password to guard the interface
UI_LOCK_PASSWORD=changeme
# Session idle timeout (seconds) before UI relock
UI_LOCK_TIMEOUT=900
# Uncomment to disable UI auth entirely (development only)
#UI_SKIP_AUTH=true

# -------------------------------------------------------------------
# Webhooks / admin operations
# -------------------------------------------------------------------

# Shared secret required by webhook integrations
WEBHOOK_SECRET_KEY=changeme
# Token protecting privileged sentinel admin endpoints
ADMIN_TOKEN=changeme

# -------------------------------------------------------------------
# Anomaly detection thresholds
# -------------------------------------------------------------------

# Multiplier applied to baseline message volume for anomaly detection
ANOMALY_VOLUME_THRESHOLD=4.0
# Multiplier applied to message importance scores
ANOMALY_IMPORTANCE_THRESHOLD=2.5
# Minimum alert rate (0-1) to trigger anomaly alerting
ANOMALY_ALERT_RATE=0.6
# Enable stddev-based anomaly mode (true/false)
ANOMALY_USE_STDDEV=true
# Stddev multiplier when ANOMALY_USE_STDDEV=true
ANOMALY_STDDEV_MULTIPLIER=2.5
